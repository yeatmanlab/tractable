<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Perform repeated sampling tests on an AFQ dataframe. — sampling_test • tractr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Perform repeated sampling tests on an AFQ dataframe. — sampling_test"><meta property="og:description" content="When permutation_test == FALSE (the default), this function bootstrap
samples from an AFQ dataframe and returns pairwise differences at each node
for each bootstrap sample. These results can then be used to construct
bootstrap confidence intervals for the node-wise differences."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tractr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/tractr-single-bundle.html">tractr-single-bundle</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/yeatmanlab/tractr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform repeated sampling tests on an AFQ dataframe.</h1>
    <small class="dont-index">Source: <a href="https://github.com/yeatmanlab/tractr/blob/HEAD/R/resample.R" class="external-link"><code>R/resample.R</code></a></small>
    <div class="hidden name"><code>sampling_test.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>When permutation_test == FALSE (the default), this function bootstrap
samples from an AFQ dataframe and returns pairwise differences at each node
for each bootstrap sample. These results can then be used to construct
bootstrap confidence intervals for the node-wise differences.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sampling_test</span><span class="op">(</span></span>
<span>  <span class="va">df_tract</span>,</span>
<span>  <span class="va">n_samples</span>,</span>
<span>  <span class="va">dwi_metric</span>,</span>
<span>  <span class="va">tract</span>,</span>
<span>  group_by <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>  participant_id <span class="op">=</span> <span class="st">"subjectID"</span>,</span>
<span>  sample_uniform <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  smooth_terms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  k <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  family <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  factor_a <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  factor_b <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  permute <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df_tract</dt>
<dd><p>AFQ Dataframe of node metric values for single tract</p></dd>


<dt>n_samples</dt>
<dd><p>Number of sample tests to perform</p></dd>


<dt>dwi_metric</dt>
<dd><p>The diffusion metric to model (e.g. "FA", "MD")</p></dd>


<dt>tract</dt>
<dd><p>AFQ tract name</p></dd>


<dt>group_by</dt>
<dd><p>The grouping variable used to group nodeID smoothing terms</p></dd>


<dt>participant_id</dt>
<dd><p>The name of the column that encodes participant ID</p></dd>


<dt>sample_uniform</dt>
<dd><p>Boolean flag. If TRUE, shuffling should sample
uniformly from the unique values in the columns. If FALSE, shuffling
will shuffle without replacement.</p></dd>


<dt>covariates</dt>
<dd><p>List of strings of GAM covariates, not including
the smoothing terms over nodes and the random effect due to subjectID.</p></dd>


<dt>smooth_terms</dt>
<dd><p>Smoothing terms, not including
the smoothing terms over nodes and the random effect due to subjectID.</p></dd>


<dt>k</dt>
<dd><p>Dimension of the basis used to represent the node smoothing term</p></dd>


<dt>family</dt>
<dd><p>Distribution to use for the gam. Must be 'gamma' or 'beta'</p></dd>


<dt>formula</dt>
<dd><p>Optional explicit formula to use for the GAM. If provided,
this will override the dynamically generated formula build from the
target, covariate, and k inputs. Default = NULL.</p></dd>


<dt>factor_a</dt>
<dd><p>First group factor, string</p></dd>


<dt>factor_b</dt>
<dd><p>Second group factor, string</p></dd>


<dt>permute</dt>
<dd><p>Boolean flag. If TRUE, perform a permutation test.
Otherwise, do a bootstrap simulation.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Dataframe with bootstrap or permutation test coefficients</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>When permutation_test == TRUE, this function simulates the null distribution
using permutation testing. That is, it shuffles to destroy any relationships
between covariates and dwi_metrics. It then computes node-wise differences
for each shuffled sample.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">df_afq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"/path/to/afq/output.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_tract</span> <span class="op">&lt;-</span> <span class="va">df_afq</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">df_afq</span><span class="op">$</span><span class="va">tractID</span> <span class="op">==</span> <span class="va">tract</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">bootstrap_coefs</span> <span class="op">&lt;-</span> <span class="fu">sampling_test</span><span class="op">(</span><span class="va">df_afq</span>,</span></span>
<span class="r-in"><span>                                 dwi_metric <span class="op">=</span> <span class="st">"dti_fa"</span>,</span></span>
<span class="r-in"><span>                                 covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"group"</span>, <span class="st">"sex"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                 family <span class="op">=</span> <span class="st">"gamma"</span>,</span></span>
<span class="r-in"><span>                                 k <span class="op">=</span> <span class="fl">40</span>,</span></span>
<span class="r-in"><span>                                 n_samples <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Adam Richie-Halford, Kelly Chang, Teresa Gomez, McKenzie Hagen, Ariel Rokem.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

